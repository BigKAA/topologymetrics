server:
  port: 8080

management:
  endpoints:
    web:
      exposure:
        include: health,prometheus,dependencies
  endpoint:
    health:
      show-details: always
  prometheus:
    metrics:
      export:
        enabled: true

dephealth:
  name: conformance-service
  group: conformance-test
  interval: ${CHECK_INTERVAL:10}s
  timeout: 5s
  dependencies:
    postgres-primary:
      type: postgres
      url: ${PRIMARY_DATABASE_URL:postgres://localhost:5432/dephealth}
      critical: true
    postgres-replica:
      type: postgres
      url: ${REPLICA_DATABASE_URL:postgres://localhost:5433/dephealth}
      critical: false
    redis-cache:
      type: redis
      url: ${REDIS_URL:redis://localhost:6379/0}
      critical: true
    rabbitmq:
      type: amqp
      url: ${RABBITMQ_URL:amqp://guest:guest@localhost:5672/}
      timeout: 10s
      critical: false
    kafka-main:
      type: kafka
      host: ${KAFKA_HOST:localhost}
      port: ${KAFKA_PORT:9092}
      critical: false
    http-service:
      type: http
      url: ${HTTP_STUB_URL:http://localhost:8081}
      health-path: /health
      critical: false
    http-auth-bearer:
      type: http
      url: ${HTTP_STUB_URL:http://localhost:8081}
      health-path: /health
      http-bearer-token: test-token-123
      critical: false
    http-auth-basic:
      type: http
      url: ${HTTP_STUB_URL:http://localhost:8081}
      health-path: /health
      http-basic-username: admin
      http-basic-password: password
      critical: false
    http-auth-header:
      type: http
      url: ${HTTP_STUB_URL:http://localhost:8081}
      health-path: /health
      http-headers:
        X-API-Key: my-secret-key
      critical: false
    http-auth-wrong:
      type: http
      url: ${HTTP_STUB_URL:http://localhost:8081}
      health-path: /health
      http-bearer-token: wrong-token
      critical: false
    grpc-service:
      type: grpc
      host: ${GRPC_STUB_HOST:localhost}
      port: ${GRPC_STUB_PORT:9090}
      critical: false
    grpc-auth-bearer:
      type: grpc
      host: ${GRPC_STUB_HOST:localhost}
      port: ${GRPC_STUB_PORT:9090}
      grpc-bearer-token: test-token-123
      critical: false
    ldap-rootdse:
      type: ldap
      host: ${LDAP_HOST:localhost}
      port: ${LDAP_PORT:3389}
      ldap-check-method: ROOT_DSE
      critical: false
    ldap-bind:
      type: ldap
      host: ${LDAP_HOST:localhost}
      port: ${LDAP_PORT:3389}
      ldap-check-method: SIMPLE_BIND
      ldap-bind-dn: "cn=Directory Manager"
      ldap-bind-password: password
      critical: false
    ldap-search:
      type: ldap
      host: ${LDAP_HOST:localhost}
      port: ${LDAP_PORT:3389}
      ldap-check-method: SEARCH
      ldap-bind-dn: "cn=Directory Manager"
      ldap-bind-password: password
      ldap-base-dn: "ou=People,dc=test,dc=local"
      critical: false
    ldap-invalid-auth:
      type: ldap
      host: ${LDAP_HOST:localhost}
      port: ${LDAP_PORT:3389}
      ldap-check-method: SIMPLE_BIND
      ldap-bind-dn: "cn=Directory Manager"
      ldap-bind-password: wrongpassword
      critical: false
